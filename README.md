# 项目简介

**项目名称**：JingNiTrader

**项目描述**：JingNiTrader是一个基于Python的量化交易开发框架，致力于提供兼容中国券商交易软件的量化解决方案。

**项目版权**：Copyright (c) 2024-present, Hanjun Du

**项目作者**：Hnjun Du (hanjun.du@outlook.com)

**项目贡献**：项目长期招募贡献者，有意向请邮件联系项目作者。

**免责声明**：本项目仅用于教育目的，不保证任何交易的成功。请自行承担风险。

**关于本项目的信息和反馈请访问GitHub存储库**：https://github.com/duhanjun/JingNiTrader

**关于本项目的学习和实践请访问在线课程目录**：https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MjM5MTU2NDA3OQ==&action=getalbum&album_id=4151851070626693141#wechat_redirect

# 项目框架

JingNiTrader的核心设计目标是简化跨平台策略开发。通过抽象层将各券商量化交易软件的接口封装成统一函数，使策略只需调用JingNiTrader的统一接口，而无需为每个量化交易软件重写适配策略代码。

|**功能模块**|**函数名称**|**使用说明**|
|-------|-------|-------|
|系统控制|main|实现系统的自动启动、运行和终止|
|事件驱动|before_trading_start/handle_data/after_trading_end|盘前盘中盘后的事件驱动运行框架|
|交易日历|trading_dates|获取指定日期前后的交易日|
|账户信息|portfolio|查询账户资产、市值、资金和持仓明细|
|代码转换|map_security_code|转换不同量化交易软件的证券代码格式|
|实时行情|get_current|获取股票的实时行情数据|
|历史行情|get_history|获取股票的历史K线数据，支持多种时间周期|
|单日数据|get_field|提取指定股票在特定交易日的某个字段值|
|多日数据|get_field_n|提取指定股票在多个交易日的字段值序列|
|数量交易|order_amount|按指定的数量执行股票的买入或卖出操作|
|金额交易|order_value|按指定的金额执行股票的买入或卖出操作|
|新股申购|subscribe_new_stock|自动申购新股，自动查询额度并提交订单|
|新债申购|subscribe_new_bond|自动申购新债，自动查询额度并提交订单|
|国债回购|participate_reverse_repo|自动化操作国债逆回购，提高资金利用率|

国内券商采购的第三方量化交易软件主要有掘金量化、QMT及PTrade，研发实力强的券商也推出自研量化交易软件。考虑到个人投资者参与量化交易的门槛，目前JingNiTrader优先选择适配下列三款量化交易软件。

**1.掘金量化**

掘金量化（Goldminer）是一款拥有策略编写、数据研究、历史回测、实时仿真、绩效分析等量化投研功能，同时提供量化实盘交易、增值算法等服务。

下载地址：https://www.myquant.cn/terminal

**2.QMT**

QMT是一款专门针对高净值投资者、活跃投资者、非投顾型产品投资者开发设计，是集行情显示，策略编写，交易执行，风控管理于一身的专业交易管理平台。支持股票、期货、融资融券、组合交易等多种交易类型，并且具有算法交易、策略编写、篮子股票交易、自定义交易界面等特色功能。

下载地址：https://xuntou.net/#/download

**3.PTrade**

PTrade是一款面向高净值个人客户及专业机构的一体化智能投资交易系统软件，支持程序化策略交易、日内回转交易、普通交易、策略模型交易等功能场景。

下载地址：https://www.isimu123.com/download.html

上述下载地址的量化交易软件均为**非券商版**，除了不具备实盘能力外，对行情数据的限制也比较多。**非券商版**（建议使用可以长期试用的掘金量化）已经可以满足本项目的部署需要，如果需要解除这些限制，可以联系开户券商开通**券商版**量化交易软件。

# 项目价值

对于普通投资者而言，即使没有深厚的编程背景，也能基于这些封装好的函数，组合实现自己的交易策略，迈出量化交易的第一步。

# 使用指南

**1.JingniTrader**

**函数名称**：无

**学习目标**：理解JingniTrader的设计理念、整体结构以及如何通过配置适应不同券商量化交易软件的策略环境。

**核心内容**：详解券商三款主流量化交易软件(ptrade/qmt/goldminer)的设置，阐述框架如何通过条件判断实现一套代码兼容运行。

**2.系统控制模块**

**函数名称**：jingni_main(trade_mode, context_data)

**学习目标**：理解如何构建系统的主控制循环，实现系统的自动启动、运行和终止。

**核心内容**：详解如何通过时间判断，在交易日自动按顺序调度和执行盘前、盘中、盘后功能模块，并管理整个系统的生命周期。

**3.事件驱动框架**

**函数名称**：jingni_before_trading_start(trade_mode, context_data)/jingni_handle_data(trade_mode, context_data)/jingni_after_trading_end(trade_mode, context_data)

**学习目标**：理解量化交易系统的事件驱动运行框架，理解不同事件功能模块的执行时机和职责。

**核心内容**：详解如何在每日盘前执行数据预加载、参数初始化等一次性任务。详解如何在交易日内以指定频率（如每3秒）循环执行核心策略逻辑，包括交易信号、风险检查和订单提交。详解如何在每日盘后执行数据持久化、绩效分析、日志清理等收尾工作。

**4.查询交易日历**

**函数名称**：jingni_trading_dates(trade_mode, context_data, trading_dates_count)

**学习目标**：掌握获取交易日历的方法，为所有时间序列运算提供基准。

**核心内容**：详解如何根据偏移量查询过去、当前或未来的交易日，并处理不同券商量化交易软件的日期差异，返回统一格式的日期，确保策略逻辑基于交易日而非自然日。

**5.查询账户信息**

**函数名称**：jingni_portfolio(trade_mode, context_data, security_field)

**学习目标**：掌握查询账户资产、市值、现金及持仓明细，为仓位管理和风险控制提供数据基础。

**核心内容**：详解如何通过指定查询参数，统一查询不同券商账户下的资产净值、持仓市值、可用资金和持仓列表。